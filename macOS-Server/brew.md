[Homebrew](https://brew.sh) - недостающий менеджер пакетов для macOS.

# Почему я перешел на Homebrew

> При настройки окружения для web-разработки на macOS Mojave по моему опыту лучше всего развернуть web-сервер с помощью Homebrew, используя простые команды в терминале, для установки всех требуемых компонентов.

1. На macOS Lion я сразу начал использовал [MacPorts](https://www.macports.org), не используя уже предустановленный в macOS Apache и PHP. Это было удобно, спасибо разработчикам MacPorts.
2. Затем на Apple Mac mini Server, который я начал использовать в качестве веб-сервера для сайта и разместил его в дата центре, была установлена macOS Yosemite, приложение macOS Server (которое позволяло управлять всеми необходимыми настройками для полноценной работы веб-сервера) и  [MySQL Community Server 5.6.26 ](https://dev.mysql.com/downloads/mysql/5.6.html#downloads).
3. Далее на Apple MacBook я установил все тоже самое, что и на Mac mini Server. Затем мне потребовалось обновить PHP 5.5 до 5.6, и затем до 7.1, что вызвало трудности. И меня очень выручил проект [php-osx.liip.ch](https://php-osx.liip.ch), спасибо его разработчикам.
4. Затем на MacBook я установил macOS Mojave и старая версия macOS Server больше не работала на новой OS, а в новой версии были исключены все компоненты для настройки веб-сервера, и поэтому я полностью перешел на Homebrew.

# Установка Homebrew

Установить Homebrew очень просто c помощью команды в терминале:

    $ /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

> Homebrew будет установлен в /usr/local.

Проверить версию установленного Homebrew можно одной из команд:

    $ brew --version
    $ brew -v

Для работы HomeBrew необходимо установить приложение для разработчиков [Apple Xcode](https://developer.apple.com/xcode/) и инструменты командной строки для него (Command Line Tools (CLT) for Xcode):

    $ xcode-select --install

Проверить наличие в системе требуемых компонентов для Homebrew можно с помощью команды:

    $ brew doctor

> HomeBrew выведет предупредждения и предложить решения, если необходимо установить, например: CLT.

#  Установка пакетов

Установить нужные пакеты, не предоставляемые Apple можно с помощью команды "brew install", например: 

    $ brew install php@7.2

>  Все пакеты устанавливаются в каталог /usr/local/Cellar, кроме того создаются соответствующие символические ссылки на пакеты в каталоге /usr/local/opt. 

Каталог /usr/local/bin добавляется в начало переменной среды $PATH, которая по умолчанию содержит только путь /usr/bin, что можно посмотреть командой:

    $ echo $PATH

Это означает, например, что macOS сначала будет искать php в /usr/local/bin, и если ее не найдет там, то будет искать /usr/bin/php и т.д., что можно проверить командой:

    $ which -a php
    /usr/local/bin/php
    /usr/bin/php

Убедиться в этом, можно проверив версию php в терминале, сначала просто по названию, а затем для каждого пути:

    $ php -v
    PHP 7.2.12 ...
    $ /usr/local/bin/php -v
    PHP 7.2.12
    $ /usr/bin/php -v
    PHP 7.1.19 ...

С помощью Homebrew можно, например, поставить новую версий php, не удаляя старую и в случае необходимости переключиться опять на старую версию.

# Обновление

Сначала скачиваем новые пакеты:

    $ brew update

Теперь мы можем проверить устаревшие пакеты:

    $ brew outdated

Затем можно обновить сразу все устаревшие пакеты:

    $ brew upgrade

Или только конкретный пакет, например:

    $ brew upgrade git
